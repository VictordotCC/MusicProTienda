<!DOCTYPE html>
<html>
    <!-- import Jquery-->
    
<head>
    <title>Test</title>
</head>
<!-- Crear Transaccion Webpay-->
<body>
    <button id="send" onclick="postWebpay()">Enviar</button>

    <script type="text/javascript">
        async function postWebpay() {
        const url = "http://localhost:8000/webpay";
        
        try {
            const response = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
            });

            const data = await response.json();
            /*<form method="post" action="Inserta aquí la url entregada">
            <input type="hidden" name="token_ws" value="Inserte aquí el token entregado" />
            <input type="submit" value="Ir a pagar" />
            </form>*/
            let form = document.createElement("form");
            form.setAttribute("method", "post");
            form.setAttribute("action", data.url);
            let input = document.createElement("input");
            input.setAttribute("type", "hidden");
            input.setAttribute("name", "token_ws");
            input.setAttribute("value", data.token);
            form.appendChild(input);
            document.body.appendChild(form);
            form.submit();
            
        } catch (error) {
            console.error(error);
        }
}
    </script>
</body>


</html>